(function(e,b){"function"===typeof define&&define.amd?define("visibility",[],function(){return b(e,document)}):e.Visibility=b(e,document)})(this,function(e,b){function d(a){this.options={onVisible:null,onHidden:null};if("object"===typeof a){for(var c in a)a.hasOwnProperty(c)&&(this.options[c]=a[c]);"function"===typeof this.options.onHidden&&(this.onHiddenCallback=this.options.onHidden);"function"===typeof this.options.onVisible&&(this.onVisibleCallback=this.options.onVisible)}this.change=this.bindContext(this,
this.visibilityChange);this.configListener("add")}d.prototype.configListener=function(a){var c;if(c=this.getHiddenProp(b))c=c.replace(/[H|h]idden/,"")+"visibilitychange","add"===a?b.addEventListener(c,this.change,!1):"remove"===a&&b.removeEventListener(c,this.change,!1)};d.prototype.getHiddenProp=function(a){var c=["webkit","moz","ms","o"];if("hidden"in a)return"hidden";for(var b=0;b<c.length;b+=1)if(c[b]+"Hidden"in a)return c[b]+"Hidden";return null};d.prototype.isHidden=function(){var a=this.getHiddenProp(b);
return!a?!1:b[a]};d.prototype.isSupported=function(){return!this.getHiddenProp(b)?!1:!0};d.prototype.bindContext=function(a,b){return function(){return b.call(a)}};d.prototype.visibilityChange=function(){var a=this.isHidden();if(a&&this.onHiddenCallback)this.onHiddenCallback();else if(!a&&this.onVisibleCallback)this.onVisibleCallback()};d.prototype.destroy=function(){this.configListener("remove");this.onVisibleCallback=this.onHiddenCallback=null};return d});
